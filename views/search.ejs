<html>

<head>

  <title>Search Page</title>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <link rel="stylesheet" href="src/css/style.css">

</head>

<body>

  <%- include partials/navbar.ejs %>

  <h1>Search for Existing Users</h1>

  <form action="/matched" method="post">
    <form action="/no_match" method="post">

        <div class="form-group">
          <label for="exampleInputFirstName">First name:</label><br>
          <input type="text" name="firstname" class="form-control" id="firstname" aria-describedby="firstnameHelp" placeholder="Enter first name" autocomplete="off">
      </div>

          <div class="form-group">
            <label for="exampleInputLastName">Last name:</label><br>
            <input type="text" name="lastname" class="form-control" id="lastname" aria-describedby="lastnameHelp" placeholder="Enter last name" autocomplete="off">
      </div>

            <div class="form-group">
              <input type="submit" value="Submit">
      </div>
              <ol id="listofnames"></ol>
      </form>

      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
          <script type="text/javascript">

            $(document).ready(function() {
              $("#firstname").keyup((event) => {
                  let firstname = $('#firstname').val().toLowerCase();
                  if (firstname.length != 0) {

                    $.post('/search', {
                      firstname: firstname
                    }, function(response) {
                      $('#listofnames').empty();
                      for (const el in response) {
                        $('#listofnames').append(`<li>${response[el]}</li>`);
                      }
                    });
                  } else {
                    $('#listofnames').empty();
                  }
              });

              $("#lastname").keyup((event) => {
                let lastname = $('#lastname').val().toLowerCase();
                if (lastname.length != 0) {

                  $.post('/search', {
                    lastname: lastname
                  }, function(response) {
                    $('#listofnames').empty();
                    for (const el in response) {
                      $('#listofnames').append(`<li>${response[el]}</li>`);
                    }
                  });
                } else {
                  $('#listofnames').empty();
                }
              });

            });
          </script>

</body>

</html>
